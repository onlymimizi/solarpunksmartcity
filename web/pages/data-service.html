<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>城市数据服务 - Solarpunk Smart City</title>
    <link rel="stylesheet" href="../components/ui.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 高科技背景 -->
    <div class="tech-background">
        <div class="grid-overlay"></div>
        <div class="floating-particles"></div>
        <div class="scan-lines"></div>
    </div>
    
    <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 40px;">
        <div class="back-button-container">
            <a href="./index.html" class="back-button">← 返回主页</a>
        </div>
        
        <!-- 页面标题区域 -->
        <div class="page-header" style="text-align: center; margin-bottom: 60px;">
            <div class="tech-badge">
                <div class="badge-glow"></div>
                <span class="badge-text">📊 CITY DATA SERVICE MODULE</span>
            </div>
            <h1 style="margin: 30px 0 20px;">城市数据服务</h1>
            <p style="font-size: 1.3rem; color: rgba(255, 255, 255, 0.8); max-width: 800px; margin: 0 auto;">
                多维度城市数据采集、分析与API服务平台 - 数据即服务(DaaS)
            </p>
        </div>

        <!-- 数据概览仪表板 -->
        <div class="tech-module" style="margin-bottom: 40px;">
            <div class="module-header">
                <div class="module-icon">📈</div>
                <div class="module-title">实时数据概览</div>
                <div class="module-subtitle">Real-time City Data Dashboard</div>
            </div>
            
            <div class="module-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: rgba(76, 175, 80, 0.1); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🚦</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #4caf50; margin-bottom: 5px;" id="traffic-data">2,847</div>
                        <div style="font-size: 0.9rem; color: #81c784;">交通流量数据点</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">实时更新</div>
                    </div>
                    
                    <div style="background: rgba(33, 150, 243, 0.1); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🌡️</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #2196f3; margin-bottom: 5px;" id="env-data">15,632</div>
                        <div style="font-size: 0.9rem; color: #64b5f6;">环境监测数据点</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">每5分钟更新</div>
                    </div>
                    
                    <div style="background: rgba(255, 152, 0, 0.1); border: 2px solid rgba(255, 152, 0, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🏢</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #ff9800; margin-bottom: 5px;" id="building-data">8,429</div>
                        <div style="font-size: 0.9rem; color: #ffb74d;">建筑能耗数据点</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">每小时更新</div>
                    </div>
                    
                    <div style="background: rgba(156, 39, 176, 0.1); border: 2px solid rgba(156, 39, 176, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">👥</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #9c27b0; margin-bottom: 5px;" id="population-data">1,247,893</div>
                        <div style="font-size: 0.9rem; color: #ba68c8;">人口流动数据点</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">每15分钟更新</div>
                    </div>
                </div>
                
                <!-- API使用统计 -->
                <div style="background: rgba(76, 175, 80, 0.05); border: 2px solid rgba(76, 175, 80, 0.2); border-radius: 15px; padding: 25px;">
                    <h3 style="color: #4caf50; margin-bottom: 20px; display: flex; align-items: center;">
                        <span style="font-size: 1.5rem; margin-right: 10px;">🔌</span>
                        API调用统计
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4caf50;" id="api-calls-today">47,293</div>
                            <div style="font-size: 0.9rem; color: #81c784;">今日调用</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #2196f3;" id="active-clients">156</div>
                            <div style="font-size: 0.9rem; color: #64b5f6;">活跃客户</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #ff9800;" id="revenue-today">¥12,847</div>
                            <div style="font-size: 0.9rem; color: #ffb74d;">今日收入</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #9c27b0;" id="data-volume">2.3TB</div>
                            <div style="font-size: 0.9rem; color: #ba68c8;">数据传输量</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 主要内容区域 - 左右布局 -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px;">
        
        <!-- 左侧：数据产品目录 -->
        <div class="tech-module">
            <div class="module-header">
                <div class="module-icon">📦</div>
                <div class="module-title">数据产品目录</div>
                <div class="module-subtitle">Data Product Catalog</div>
            </div>
            
            <div class="module-content">
                <!-- 交通数据 -->
                <div class="data-product-card" style="background: rgba(76, 175, 80, 0.1); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 1.8rem; margin-right: 12px;">🚦</span>
                            <div>
                                <h4 style="color: #4caf50; margin: 0; font-size: 1.1rem;">智能交通数据</h4>
                                <p style="color: #81c784; margin: 5px 0 0 0; font-size: 0.9rem;">实时交通流量、拥堵指数、路况预测</p>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #4caf50; font-weight: 700; font-size: 1.1rem;">¥0.05/次</div>
                            <div style="color: #666; font-size: 0.8rem;">API调用</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <span style="background: rgba(76, 175, 80, 0.2); color: #4caf50; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">实时数据</span>
                        <span style="background: rgba(76, 175, 80, 0.2); color: #4caf50; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">预测分析</span>
                        <span style="background: rgba(76, 175, 80, 0.2); color: #4caf50; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">历史数据</span>
                    </div>
                    <button onclick="subscribeDataProduct('traffic')" class="tech-button" style="width: 100%; padding: 10px; font-size: 0.9rem;">
                        <span class="button-text">🔌 接入API</span>
                    </button>
                </div>
                
                <!-- 环境数据 -->
                <div class="data-product-card" style="background: rgba(33, 150, 243, 0.1); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 1.8rem; margin-right: 12px;">🌡️</span>
                            <div>
                                <h4 style="color: #2196f3; margin: 0; font-size: 1.1rem;">环境监测数据</h4>
                                <p style="color: #64b5f6; margin: 5px 0 0 0; font-size: 0.9rem;">空气质量、温湿度、噪音、辐射监测</p>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #2196f3; font-weight: 700; font-size: 1.1rem;">¥0.03/次</div>
                            <div style="color: #666; font-size: 0.8rem;">API调用</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <span style="background: rgba(33, 150, 243, 0.2); color: #2196f3; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">多点监测</span>
                        <span style="background: rgba(33, 150, 243, 0.2); color: #2196f3; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">质量评级</span>
                        <span style="background: rgba(33, 150, 243, 0.2); color: #2196f3; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">趋势分析</span>
                    </div>
                    <button onclick="subscribeDataProduct('environment')" class="tech-button" style="width: 100%; padding: 10px; font-size: 0.9rem;">
                        <span class="button-text">🔌 接入API</span>
                    </button>
                </div>
                
                <!-- 建筑能耗数据 -->
                <div class="data-product-card" style="background: rgba(255, 152, 0, 0.1); border: 2px solid rgba(255, 152, 0, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 1.8rem; margin-right: 12px;">🏢</span>
                            <div>
                                <h4 style="color: #ff9800; margin: 0; font-size: 1.1rem;">建筑能耗数据</h4>
                                <p style="color: #ffb74d; margin: 5px 0 0 0; font-size: 0.9rem;">电力消耗、碳排放、能效评级</p>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="color: #ff9800; font-weight: 700; font-size: 1.1rem;">¥0.08/次</div>
                            <div style="color: #666; font-size: 0.8rem;">API调用</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <span style="background: rgba(255, 152, 0, 0.2); color: #ff9800; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">能耗分析</span>
                        <span style="background: rgba(255, 152, 0, 0.2); color: #ff9800; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">碳足迹</span>
                        <span style="background: rgba(255, 152, 0, 0.2); color: #ff9800; padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">节能建议</span>
                    </div>
                    <button onclick="subscribeDataProduct('building')" class="tech-button" style="width: 100%; padding: 10px; font-size: 0.9rem;">
                        <span class="button-text">🔌 接入API</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 右侧：API管理控制台 -->
        <div class="tech-module">
            <div class="module-header">
                <div class="module-icon">🔑</div>
                <div class="module-title">API管理控制台</div>
                <div class="module-subtitle">API Management Console</div>
            </div>
            
            <div class="module-content">
                <!-- API密钥管理 -->
                <div style="background: rgba(76, 175, 80, 0.1); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="color: #4caf50; margin: 0 0 15px 0; display: flex; align-items: center;">
                        <span style="font-size: 1.3rem; margin-right: 8px;">🔐</span>
                        API密钥管理
                    </h4>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 8px; color: #4caf50; font-weight: 600;">当前API密钥</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="api-key" value="sk-proj-abc123...xyz789" readonly style="flex: 1; padding: 10px; background: rgba(76, 175, 80, 0.1); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 8px; color: #4caf50; font-family: monospace;">
                            <button onclick="copyApiKey()" class="tech-button" style="padding: 10px 15px; font-size: 0.9rem;">
                                <span class="button-text">📋 复制</span>
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button onclick="regenerateApiKey()" class="tech-button" style="padding: 10px; font-size: 0.9rem;">
                            <span class="button-text">🔄 重新生成</span>
                        </button>
                        <button onclick="viewApiDocs()" class="tech-button" style="padding: 10px; font-size: 0.9rem;">
                            <span class="button-text">📚 API文档</span>
                        </button>
                    </div>
                </div>
                
                <!-- 使用量统计 -->
                <div style="background: rgba(33, 150, 243, 0.1); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="color: #2196f3; margin: 0 0 15px 0; display: flex; align-items: center;">
                        <span style="font-size: 1.3rem; margin-right: 8px;">📊</span>
                        使用量统计
                    </h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #2196f3;" id="monthly-calls">12,847</div>
                            <div style="font-size: 0.9rem; color: #64b5f6;">本月调用</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #2196f3;" id="remaining-quota">87,153</div>
                            <div style="font-size: 0.9rem; color: #64b5f6;">剩余配额</div>
                        </div>
                    </div>
                    
                    <!-- 使用量进度条 -->
                    <div style="background: rgba(33, 150, 243, 0.2); border-radius: 10px; height: 8px; margin-bottom: 10px;">
                        <div style="background: #2196f3; border-radius: 10px; height: 100%; width: 12.8%;"></div>
                    </div>
                    <div style="font-size: 0.8rem; color: #64b5f6; text-align: center;">已使用 12.8% (12,847 / 100,000)</div>
                </div>
                
                <!-- 计费信息 -->
                <div style="background: rgba(255, 152, 0, 0.1); border: 2px solid rgba(255, 152, 0, 0.3); border-radius: 15px; padding: 20px;">
                    <h4 style="color: #ff9800; margin: 0 0 15px 0; display: flex; align-items: center;">
                        <span style="font-size: 1.3rem; margin-right: 8px;">💰</span>
                        计费信息
                    </h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #ff9800;" id="current-bill">¥642.35</div>
                            <div style="font-size: 0.9rem; color: #ffb74d;">本月账单</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #ff9800;" id="account-balance">¥2,357.65</div>
                            <div style="font-size: 0.9rem; color: #ffb74d;">账户余额</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button onclick="rechargeAccount()" class="tech-button" style="padding: 10px; font-size: 0.9rem;">
                            <span class="button-text">💳 充值</span>
                        </button>
                        <button onclick="viewBilling()" class="tech-button" style="padding: 10px; font-size: 0.9rem;">
                            <span class="button-text">📄 账单详情</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        </div> <!-- 结束左右布局容器 -->

        <!-- 数据质量监控 -->
        <div class="tech-module" style="margin-bottom: 40px;">
            <div class="module-header">
                <div class="module-icon">🎯</div>
                <div class="module-title">数据质量监控</div>
                <div class="module-subtitle">Data Quality Monitoring</div>
            </div>
            
            <div class="module-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: rgba(76, 175, 80, 0.1); border: 2px solid rgba(76, 175, 80, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">✅</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #4caf50; margin-bottom: 5px;">99.8%</div>
                        <div style="font-size: 0.9rem; color: #81c784;">数据完整性</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">过去24小时</div>
                    </div>
                    
                    <div style="background: rgba(33, 150, 243, 0.1); border: 2px solid rgba(33, 150, 243, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">⚡</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #2196f3; margin-bottom: 5px;">156ms</div>
                        <div style="font-size: 0.9rem; color: #64b5f6;">平均响应时间</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">API调用延迟</div>
                    </div>
                    
                    <div style="background: rgba(255, 152, 0, 0.1); border: 2px solid rgba(255, 152, 0, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🔄</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #ff9800; margin-bottom: 5px;">99.9%</div>
                        <div style="font-size: 0.9rem; color: #ffb74d;">服务可用性</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">过去30天</div>
                    </div>
                    
                    <div style="background: rgba(156, 39, 176, 0.1); border: 2px solid rgba(156, 39, 176, 0.3); border-radius: 15px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">🛡️</div>
                        <div style="font-size: 2rem; font-weight: 700; color: #9c27b0; margin-bottom: 5px;">100%</div>
                        <div style="font-size: 0.9rem; color: #ba68c8;">数据安全性</div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">加密传输</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 模拟实时数据更新
        function updateRealTimeData() {
            // 更新交通数据
            const trafficBase = 2847;
            document.getElementById('traffic-data').textContent = (trafficBase + Math.floor(Math.random() * 200)).toLocaleString();
            
            // 更新环境数据
            const envBase = 15632;
            document.getElementById('env-data').textContent = (envBase + Math.floor(Math.random() * 500)).toLocaleString();
            
            // 更新建筑数据
            const buildingBase = 8429;
            document.getElementById('building-data').textContent = (buildingBase + Math.floor(Math.random() * 100)).toLocaleString();
            
            // 更新人口数据
            const populationBase = 1247893;
            document.getElementById('population-data').textContent = (populationBase + Math.floor(Math.random() * 1000)).toLocaleString();
            
            // 更新API统计
            const apiCallsBase = 47293;
            document.getElementById('api-calls-today').textContent = (apiCallsBase + Math.floor(Math.random() * 1000)).toLocaleString();
            
            const activeClientsBase = 156;
            document.getElementById('active-clients').textContent = (activeClientsBase + Math.floor(Math.random() * 20)).toLocaleString();
            
            const revenueBase = 12847;
            document.getElementById('revenue-today').textContent = '¥' + (revenueBase + Math.floor(Math.random() * 500)).toLocaleString();
            
            // 更新数据传输量
            const dataVolumes = ['2.1TB', '2.2TB', '2.3TB', '2.4TB', '2.5TB'];
            document.getElementById('data-volume').textContent = dataVolumes[Math.floor(Math.random() * dataVolumes.length)];
        }
        
        // 订阅数据产品
        function subscribeDataProduct(productType) {
            const productNames = {
                'traffic': '智能交通数据',
                'environment': '环境监测数据',
                'building': '建筑能耗数据'
            };
            
            alert(`正在为您开通 ${productNames[productType]} API访问权限...\n\n✅ 订阅成功！\n🔑 API密钥已更新\n📊 可立即开始调用数据接口`);
        }
        
        // 复制API密钥
        function copyApiKey() {
            const apiKey = document.getElementById('api-key');
            apiKey.select();
            document.execCommand('copy');
            alert('API密钥已复制到剪贴板！');
        }
        
        // 重新生成API密钥
        function regenerateApiKey() {
            if (confirm('确定要重新生成API密钥吗？\n旧密钥将立即失效，请及时更新您的应用配置。')) {
                const newKey = 'sk-proj-' + Math.random().toString(36).substr(2, 20) + '...' + Math.random().toString(36).substr(2, 8);
                document.getElementById('api-key').value = newKey;
                alert('✅ API密钥已重新生成！\n请及时更新您的应用配置。');
            }
        }
        
        // 查看API文档
        function viewApiDocs() {
            alert('🚀 API文档功能开发中...\n\n将包含：\n• 完整的接口说明\n• 代码示例\n• 错误码说明\n• 最佳实践指南');
        }
        
        // 账户充值
        function rechargeAccount() {
            const amount = prompt('请输入充值金额（元）：', '1000');
            if (amount && !isNaN(amount) && parseFloat(amount) > 0) {
                alert(`💳 充值 ¥${amount} 成功！\n\n账户余额已更新\n感谢您使用城市数据服务！`);
                
                // 更新余额显示
                const currentBalance = parseFloat(document.getElementById('account-balance').textContent.replace('¥', '').replace(',', ''));
                const newBalance = currentBalance + parseFloat(amount);
                document.getElementById('account-balance').textContent = '¥' + newBalance.toLocaleString();
            }
        }
        
        // 查看账单详情
        function viewBilling() {
            alert('📄 账单详情\n\n本月消费明细：\n• 交通数据API: ¥234.50 (4,690次调用)\n• 环境数据API: ¥187.20 (6,240次调用)\n• 建筑数据API: ¥220.65 (2,758次调用)\n\n总计: ¥642.35');
        }
        
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 启动实时数据更新
            updateRealTimeData();
            setInterval(updateRealTimeData, 5000);
            
            console.log('🚀 城市数据服务平台已启动');
            console.log('📊 实时数据更新中...');
        });
    </script>
</body>
</html>